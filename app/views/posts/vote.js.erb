<%- if  @vote.valid? -%>

  $('#post_<%= @post.slug %>_vote').html('<%= @post.total_votes.to_s + ' vote'.pluralize(@post.total_votes) %>');

<%- else -%>
  var error_template="<%= escape_javascript(render 'shared/errors', votable: "post", obj: @vote) %>";

  $(error_template).insertBefore('#post_<%= "#{@post.slug}" %>_container').hide().slideDown("slow", function() {
    $('.error_wrapper').delay( 2300 ).slideUp( "slow", function() {
       $(this).remove();
    } );
  });
<%- end -%>